<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TDOG: TDOG C++ xUnit testing framework</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TDOG
   &#160;<span id="projectnumber">Version 3.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">TDOG C++ xUnit testing framework </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="tdog_contents"></a>
Contents</h1>
<ul>
<li><a class="el" href="index.html#tdog_intro">Introduction</a></li>
<li><a class="el" href="index.html#tdog_license">License</a></li>
<li><a class="el" href="index.html#tdog_getting_started">Getting Started</a></li>
<li><a class="el" href="index.html#tdog_examples">Example Reports</a></li>
</ul>
<ul>
<li><a class="el" href="index.html#tdog_main">Main features</a></li>
<li><a class="el" href="index.html#tdog_test_cases">Simple test cases</a></li>
<li><a class="el" href="index.html#tdog_suites">Test suites</a></li>
<li><a class="el" href="index.html#tdog_assertions">Test assertions</a></li>
<li><a class="el" href="index.html#tdog_fixtures">Test fixtures - setup/teardown</a></li>
<li><a class="el" href="index.html#tdog_repeated">Repeated tests</a></li>
<li><a class="el" href="index.html#tdog_print">Outputting information</a></li>
<li><a class="el" href="index.html#tdog_run">Running tests and execution order</a></li>
<li><a class="el" href="index.html#tdog_info">Project information</a></li>
<li><a class="el" href="index.html#tdog_disable">Disabling tests</a></li>
<li><a class="el" href="index.html#tdog_cmdline">Support for CLI</a></li>
<li><a class="el" href="index.html#tdog_host">Hostname</a></li>
</ul>
<h2><a class="anchor" id="tdog_ref"></a>
Reference pages</h2>
<ul>
<li><a class="el" href="tdog_8hpp.html">MACRO REFERENCE </a></li>
<li><a class="el" href="classtdog_1_1runner.html">Internal runner class </a></li>
</ul>
<p><br />
</p>
<h1><a class="anchor" id="tdog_intro"></a>
Introduction</h1>
<p>TDOG is a lightweight, portable and open source C++ xUnit Testing Framework. It features:</p>
<ul>
<li>Macros for easy unit test creation</li>
<li>C++ namespaced test suites (test groups)</li>
<li>Test fixtures</li>
<li>Test, suite &amp; global level setup/teardown</li>
<li>Repeated tests</li>
<li>Multi-report generation:<ul>
<li>Text</li>
<li>HTML</li>
<li>JUnit/Jenkins compatible XML</li>
</ul>
</li>
<li>Comprehensive range of asserts</li>
<li>Test specific and global time limits</li>
<li>Test time warnings</li>
<li>Exceptions (i.e. "no throw" and "throw" tests)</li>
<li>Not dependendent on RTTI</li>
<li>Lightweight &amp; highly portable</li>
<li>No dependencies on other libraries or tools</li>
<li>Comprehensive documentation</li>
<li>Unencumbered open source license</li>
</ul>
<p>TDOG is maintained for g++ for Linux, MSVC and MinGW on Windows. It can be found at: <a href="https://kuiper.zone/">https://kuiper.zone/</a></p>
<p><br />
</p>
<h1><a class="anchor" id="tdog_license"></a>
License</h1>
<p>TDOG is distributed under the Apache 2.0 open source license, as follows:</p>
<p>Copyright (c) 2016 Kuiper</p>
<p>Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at</p>
<p><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>
<p>Trademarks, documentation and other non-source code assets are specifically excluded from the open source license.</p>
<p><br />
</p>
<h1><a class="anchor" id="tdog_getting_started"></a>
Getting Started</h1>
<h2><a class="anchor" id="tdog_build"></a>
Building &amp; linking</h2>
<p>The TDOG Framework comprises a static library file and related header files. Makefiles are provided which will build both the static library and a self-testing application. See the README notes in the install directory for more information.</p>
<p>To link your project against TDOG:</p><ul>
<li>1. Link against: "lib/libtdog.a" (or "tdog.lib" or variant with MSVC)</li>
<li>2. Add the TDOG "inc/" sub-directory to your include path.</li>
<li>3. Use: "#include &lt;tdog.hpp&gt;" in your source files.</li>
</ul>
<h2><a class="anchor" id="tdog_simple_example"></a>
A simple example</h2>
<p>Below is an example of a simple test and main function:</p>
<div class="fragment"><div class="line"><span class="comment">// Include TDOG</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="tdog_8hpp.html">tdog.hpp</a>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">// Some function declaration</span></div><div class="line"><span class="keywordtype">bool</span> is_prime(<span class="keywordtype">int</span> a);</div><div class="line"></div><div class="line"><span class="comment">// Define a test case to check whether a function</span></div><div class="line"><span class="comment">// called &quot;is_prime()&quot; returns correct results.</span></div><div class="line"><a class="code" href="tdog_8hpp.html#afd6b256b805eab47d1031b32290cfd62">TDOG_TEST_CASE</a>(is_prime_func)</div><div class="line">{</div><div class="line">  <a class="code" href="tdog_8hpp.html#a08c0d71137c2992f88b1e62ec1681f0e">TDOG_ASSERT</a>( is_prime(47) );</div><div class="line">  <a class="code" href="tdog_8hpp.html#a08c0d71137c2992f88b1e62ec1681f0e">TDOG_ASSERT</a>( !is_prime(8) );</div><div class="line">  <a class="code" href="tdog_8hpp.html#a08c0d71137c2992f88b1e62ec1681f0e">TDOG_ASSERT</a>( !is_prime(21) );</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div><div class="line">{</div><div class="line">  <span class="comment">// By default, results will be written</span></div><div class="line">  <span class="comment">// to STDOUT in summary text format.</span></div><div class="line">  <span class="keywordflow">return</span> <a class="code" href="tdog_8hpp.html#a1e4db8ca943faed0a1e3860b06481619">TDOG_RUN_ALL</a>();</div><div class="line">}</div></div><!-- fragment --><p>In this example, we have (presumably) written a function called "is_prime()" which we want to test.</p>
<p>We should include the header file "tdog.hpp", and define a simple test case to exercise our function with the help of the <a class="el" href="tdog_8hpp.html#afd6b256b805eab47d1031b32290cfd62" title="Declares and implements a test case. ">TDOG_TEST_CASE()</a> macro. The test can then be executed with the macro <a class="el" href="tdog_8hpp.html#a1e4db8ca943faed0a1e3860b06481619" title="Run all tests â€“ a synonym for TDOG_RUN(&quot;*&quot;). ">TDOG_RUN_ALL()</a>, or TDOG_RUN("*"), in the main function. The return result will be the number of test failures, or RAN_NONE (-1) if no tests were executed.</p>
<p>Behind the scenes, when the test case is declared, the test implementation will "auto-register" with a global instance of a class called <a class="el" href="classtdog_1_1runner.html" title="The runner class is used to run test cases, collate results and create reports. ">tdog::runner</a>. Normally, there is no need to concern yourself with this, as macros are available which "encapsulate" all commonly needed functionality.</p>
<p>The output of the above example will be written to the console, and will look like:</p>
<div class="fragment"><div class="line">-----------------------------------------------------------------</div><div class="line">Hostname: STARONE</div><div class="line">Platform: WINDOWS 64-bit</div><div class="line">Start Time: 2016-03-11 10:45:39</div><div class="line">-----------------------------------------------------------------</div><div class="line"></div><div class="line">is_prime_func : TEST PASSED</div><div class="line"></div><div class="line">-----------------------------------------------------------------</div><div class="line">SKIPPED/DISABLED TESTS</div><div class="line">-----------------------------------------------------------------</div><div class="line">NONE</div><div class="line"></div><div class="line">-----------------------------------------------------------------</div><div class="line">STATISTICAL RESULTS</div><div class="line">-----------------------------------------------------------------</div><div class="line">TOTAL: 1</div><div class="line">Ran: 1</div><div class="line">Passed: 1</div><div class="line">Failed: 0</div><div class="line">Warnings: 0</div><div class="line">Errors: 0</div><div class="line">Skipped: 0</div><div class="line">Disabled: 0</div><div class="line">Pass Rate: 100%</div><div class="line"></div><div class="line">-----------------------------------------------------------------</div><div class="line">END TIME: 2016-03-11 10:45:39</div><div class="line">RUN DURATION: 0 sec, 0 ms</div><div class="line">-----------------------------------------------------------------</div></div><!-- fragment --><p>If we want to a different output and, say, write a JUnit compatible report to STDOUT as well as a HTML file for human consumption, our main function should look like this:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div><div class="line">{</div><div class="line">  <span class="comment">// Set default report output</span></div><div class="line">  <a class="code" href="tdog_8hpp.html#a07a55ae781e7de164019d24b8d415c40">TDOG_SET_DEFAULT_REPORT</a>(<a class="code" href="namespacetdog.html#a662900624cc42ec724afed87e60104e0ab2771e73003704212d689a0ed8b50563">tdog::RS_XML</a>);</div><div class="line"></div><div class="line">  <span class="comment">// Additional report output</span></div><div class="line">  <a class="code" href="tdog_8hpp.html#a721047a4f0852696faa84e4ca221c324">TDOG_ADD_REPORT</a>(<a class="code" href="namespacetdog.html#a662900624cc42ec724afed87e60104e0ad8aa23cb8a3895a6c8f7029509e57c1d">tdog::RS_HTML_VERBOSE</a>, <span class="stringliteral">&quot;./test-report.html&quot;</span>);</div><div class="line"></div><div class="line">  <span class="comment">// Run the tests</span></div><div class="line">  <span class="comment">// This is synonymous with TDOG_RUN_ALL()</span></div><div class="line">  <span class="keywordflow">return</span> <a class="code" href="tdog_8hpp.html#ad86b4ee69bd50879b1ad0f3096019f77">TDOG_RUN</a>(<span class="stringliteral">&quot;*&quot;</span>);</div><div class="line">}</div></div><!-- fragment --><p>In our example, we have defined the test case in the same file as the main function. In reality, however, it would be normal practice to define them in header files, as they will be easier to manage this way. However, it is important to include test definitions in only one compilation unit (usually the one containing main()), otherwise "redefinition" linker errors will occur.</p>
<h2><a class="anchor" id="tdog_examples"></a>
Example Reports</h2>
<p>Below, are three test reports generated by the TDOG self-test application in the support output formats:</p>
<ul>
<li><a href="report.html">HTML Report</a></li>
<li><a href="report.txt">Text Report</a></li>
<li><a href="report.xml">XML Report</a></li>
</ul>
<p>Use the browser back button to return.</p>
<p><br />
</p>
<h1><a class="anchor" id="tdog_main"></a>
Main features</h1>
<h2><a class="anchor" id="tdog_reports"></a>
Report Generation</h2>
<p>TDOG supports the following report types:</p><ul>
<li>NONE - No report is generated</li>
<li>TEXT - Human readable summary report</li>
<li>TEXT (Verbose) - Human readable report with full test output</li>
<li>HTML - HTML summary report</li>
<li>HTML (Verbose) - HTML report with full test output</li>
<li>XML - JUnit compatible XML report</li>
</ul>
<p>Any one of the above report type may be written to STDOUT during execution, plus any combination written to file at the end of the test run.</p>
<p>Example:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div><div class="line">{</div><div class="line">  <span class="comment">// Set default output to be XML</span></div><div class="line">  <a class="code" href="tdog_8hpp.html#a07a55ae781e7de164019d24b8d415c40">TDOG_SET_DEFAULT_REPORT</a>(<a class="code" href="namespacetdog.html#a662900624cc42ec724afed87e60104e0afee1e7a4e65061580fe18402f4281b39">tdog::RS_TEXT_SUMMARY</a>);</div><div class="line"></div><div class="line">  <span class="comment">// Additional verbose report outputs</span></div><div class="line">  <a class="code" href="tdog_8hpp.html#a721047a4f0852696faa84e4ca221c324">TDOG_ADD_REPORT</a>(<a class="code" href="namespacetdog.html#a662900624cc42ec724afed87e60104e0ab2771e73003704212d689a0ed8b50563">tdog::RS_XML</a>, <span class="stringliteral">&quot;./test-report.xml&quot;</span>);</div><div class="line">  <a class="code" href="tdog_8hpp.html#a721047a4f0852696faa84e4ca221c324">TDOG_ADD_REPORT</a>(<a class="code" href="namespacetdog.html#a662900624cc42ec724afed87e60104e0ad8aa23cb8a3895a6c8f7029509e57c1d">tdog::RS_HTML_VERBOSE</a>, <span class="stringliteral">&quot;./test-report.html&quot;</span>);</div><div class="line">  <a class="code" href="tdog_8hpp.html#a721047a4f0852696faa84e4ca221c324">TDOG_ADD_REPORT</a>(<a class="code" href="namespacetdog.html#a662900624cc42ec724afed87e60104e0a965005342c3f9090b77f8656846f1241">tdog::RS_TEXT_VERBOSE</a>, <span class="stringliteral">&quot;./test-report.txt&quot;</span>);</div><div class="line"></div><div class="line">  <span class="comment">// Run the tests</span></div><div class="line">  <span class="keywordflow">return</span> <a class="code" href="tdog_8hpp.html#a1e4db8ca943faed0a1e3860b06481619">TDOG_RUN_ALL</a>();</div><div class="line">}</div></div><!-- fragment --><h2><a class="anchor" id="tdog_test_cases"></a>
Simple test cases</h2>
<p>Test cases are declared using the <a class="el" href="tdog_8hpp.html#afd6b256b805eab47d1031b32290cfd62" title="Declares and implements a test case. ">TDOG_TEST_CASE()</a> macro, as follows:</p>
<div class="fragment"><div class="line"><a class="code" href="tdog_8hpp.html#afd6b256b805eab47d1031b32290cfd62">TDOG_TEST_CASE</a>(number_test)</div><div class="line">{</div><div class="line">  <span class="keywordtype">int</span> num_beast = 665;</div><div class="line">  <a class="code" href="tdog_8hpp.html#ac44c7252a88fd15a5935bcaa0a7e9dfc">TDOG_ASSERT_EQ</a>(666, ++num_beast); <span class="comment">// Trivial pass</span></div><div class="line">}</div></div><!-- fragment --><p>The test name should not contain spaces, as it will be used internally to form the basis of a C++ class type. The test code should not return any result.</p>
<h2><a class="anchor" id="tdog_suites"></a>
Test suites</h2>
<p>A test suite allows test cases to be run or disabled in groups. The suite name will be used directly as a C++ namespace around its test cases, so it must not contain spaces. Declaring tests within namespaced suites also allows the same test name to be used in multiple contexts.</p>
<p>Tests within the suite will automatically "self-register" with a global instance of the <a class="el" href="classtdog_1_1runner.html" title="The runner class is used to run test cases, collate results and create reports. ">tdog::runner</a> class. This means that they can simply be defined and run using the <a class="el" href="tdog_8hpp.html#ad86b4ee69bd50879b1ad0f3096019f77" title="Run the tests matching the given list of test case and suite name(s). ">TDOG_RUN()</a> macro, without having to deal with a runner class directly. However, if you need the flexibility to register tests explicity with your own code, the macro <a class="el" href="tdog_8hpp.html#af2a3f056b87352c597fa8da8eaa6d7f2" title="Declares a suite of tests that do not &quot;self-register&quot; with the global runner instance. ">TDOG_EXPLICIT_SUITE()</a> is provided to allows you to do this.</p>
<p>When declaring a test suite, it is important to "close" the suite with a TDOG_CLOSE_SUITE statement at the end of namespace scope. This is needed to allow the runner to properly track where one suite namespace ends, and a new one begins.</p>
<p>In the following example, a unit test is defined inside a test suite:</p>
<div class="fragment"><div class="line"><a class="code" href="tdog_8hpp.html#a87d164c8ed8e9fb72365df0fe74db013">TDOG_SUITE</a>(beast_suite)</div><div class="line">{</div><div class="line">  <a class="code" href="tdog_8hpp.html#afd6b256b805eab47d1031b32290cfd62">TDOG_TEST_CASE</a>(number_test)</div><div class="line">  {</div><div class="line">    <span class="keywordtype">int</span> num_beast = 666;</div><div class="line">    <a class="code" href="tdog_8hpp.html#ac44c7252a88fd15a5935bcaa0a7e9dfc">TDOG_ASSERT_EQ</a>(666, num_beast); <span class="comment">// Passes</span></div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="comment">// Must close test suite</span></div><div class="line">  <a class="code" href="tdog_8hpp.html#a6e6f40f36240dcddfc013fc84db7de17">TDOG_CLOSE_SUITE</a></div><div class="line">}</div></div><!-- fragment --><p>Because a suite is effectively a namespace, it may also declare data and functions for use in test implementation. This may be used to provide a mechanism to inject parameters into tests, and retrieve data set by them.</p>
<p>Suites may also be nested, and the following demonstrates a number of things:</p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>project_namespace</div><div class="line">{</div><div class="line">  <a class="code" href="tdog_8hpp.html#a87d164c8ed8e9fb72365df0fe74db013">TDOG_SUITE</a>(example_suite)</div><div class="line">  {</div><div class="line">    <a class="code" href="tdog_8hpp.html#a87d164c8ed8e9fb72365df0fe74db013">TDOG_SUITE</a>(beast_suite)</div><div class="line">    {</div><div class="line">      <span class="keywordtype">int</span> INIT_BEAST = 0;</div><div class="line"></div><div class="line">      <a class="code" href="tdog_8hpp.html#afd6b256b805eab47d1031b32290cfd62">TDOG_TEST_CASE</a>(neighbor_test)</div><div class="line">      {</div><div class="line">        <span class="keywordtype">int</span> neighbor_of_beast = INIT_BEAST + 2;</div><div class="line">        <a class="code" href="tdog_8hpp.html#ac44c7252a88fd15a5935bcaa0a7e9dfc">TDOG_ASSERT_EQ</a>(668, neighbor_of_beast); <span class="comment">// Passes</span></div><div class="line">      }</div><div class="line"></div><div class="line">      <span class="comment">// beast_suite</span></div><div class="line">      <a class="code" href="tdog_8hpp.html#a6e6f40f36240dcddfc013fc84db7de17">TDOG_CLOSE_SUITE</a></div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// example_suite</span></div><div class="line">    <a class="code" href="tdog_8hpp.html#a6e6f40f36240dcddfc013fc84db7de17">TDOG_CLOSE_SUITE</a></div><div class="line">  }</div><div class="line">}</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line"><span class="comment">// Set value, and run the neighbor test</span></div><div class="line">project_namespace::example_suite::beast_suite::INIT_BEAST = 666; <span class="comment">// &lt;- inc. project_namespace</span></div><div class="line"><a class="code" href="tdog_8hpp.html#ad86b4ee69bd50879b1ad0f3096019f77">TDOG_RUN</a>(<span class="stringliteral">&quot;example_suite::best_suite::neighbor_test&quot;</span>); <span class="comment">// &lt;- exc. project_namespace</span></div></div><!-- fragment --><p>Here we have a test case inside a nested suite that uses a data value declared within the suite. We set this to the required value prior to running the test.</p>
<p>Furthermore, to demonstrate an important point, we have declared the suites inside the ordinary namespace, "project_namespace". This is allowed. However, to run the test, you must refer to it with the string name "example_suite::beast_suite::number_test", rather than "project_namespace::example_suite::beast_suite::number_test", as TDOG cannot track the namespace name without the use of the <a class="el" href="tdog_8hpp.html#a87d164c8ed8e9fb72365df0fe74db013" title="Allows &quot;auto-registering&quot; tests to be namespaced and grouped into &quot;suites&quot;. ">TDOG_SUITE()</a> macro.</p>
<p>Typically, suites and test cases would be defined in header files to be included in the compilation unit containing the main() function. Test suite names may also be contiguous, i.e. defined across multiple header files, provided the compiler supports the commonly available "__COUNTER__" macro. (See TDOG_COUNTER_ID for more information on this.)</p>
<h2><a class="anchor" id="tdog_assertions"></a>
Test assertions</h2>
<p>Within a test case implementation, one or more assertions should be called using the TDOG assert macros.</p>
<p>For example:</p>
<div class="fragment"><div class="line"><a class="code" href="tdog_8hpp.html#afd6b256b805eab47d1031b32290cfd62">TDOG_TEST_CASE</a>(simple_test)</div><div class="line">{</div><div class="line">  <span class="keywordtype">int</span> calc = divide_func(8, 2);</div><div class="line">  <a class="code" href="tdog_8hpp.html#ac44c7252a88fd15a5935bcaa0a7e9dfc">TDOG_ASSERT_EQ</a>(4, calc); <span class="comment">// Passes</span></div><div class="line">}</div></div><!-- fragment --><p>The assert macro checks that the condition is true, and records a failure condition in the report if it is not. A test case is deemed to have passed if all its assert conditions are true, but failed if one or more assertions fail.</p>
<p>When an assert condition fails, a failure message will be displayed in the test report output, along with the filename and line number. If the reporting style is "verbose", test pass events and informational "PRINT" messages will also be displayed in the report.</p>
<p>If the test code throws an unhandled exception, the test case will be placed into an "error state". In this event, the test has effectively failed, but the state is considered distinct as it allows for possible test implementation errors to be easily distinguished.</p>
<p>TDOG assert macros include:</p><ul>
<li><a class="el" href="tdog_8hpp.html#a08c0d71137c2992f88b1e62ec1681f0e" title="Asserts that the test condition is true (test fails if it is not). ">TDOG_ASSERT()</a></li>
<li><a class="el" href="tdog_8hpp.html#ac44c7252a88fd15a5935bcaa0a7e9dfc" title="Asserts that the values are equal (test fails if not). ">TDOG_ASSERT_EQ()</a></li>
<li><a class="el" href="tdog_8hpp.html#a09cd26959f95c365a31b8681bfce2d58" title="Asserts that &#39;act&#39; is less than &#39;lim&#39; (test fails if not). ">TDOG_ASSERT_LT()</a></li>
<li><a class="el" href="tdog_8hpp.html#a9e94c1499f4129649eefd95bbb1559fa" title="Asserts that &#39;act&#39; is less than or equal to &#39;lim&#39; (test fails if not). ">TDOG_ASSERT_LTE()</a></li>
<li><a class="el" href="tdog_8hpp.html#a18efcd6811e7d399cea461d03cf8fa4a" title="Asserts that &#39;act&#39; is greater than &#39;lim&#39; (test fails if not). ">TDOG_ASSERT_GT()</a></li>
<li><a class="el" href="tdog_8hpp.html#aa51425598189582f62f5c8970bfc17c6" title="Asserts that &#39;act&#39; is greater than or equal to &#39;lim&#39; (test fails if not). ">TDOG_ASSERT_GTE()</a></li>
<li><a class="el" href="tdog_8hpp.html#aef7e28e4aba0a00b24e10a65e7592d62" title="Asserts that floating point (double) values are equal to within the range +/- delta. ">TDOG_ASSERT_DOUBLE_EQ()</a></li>
<li><a class="el" href="tdog_8hpp.html#afebbbf3a89ad57d38900e6fdfb3f37dc" title="Compares strings case insensitively and asserts that they are equal (test fails if not)...">TDOG_ASSERT_STRIC_EQ()</a></li>
<li><a class="el" href="tdog_8hpp.html#a8fea95f5df202217393ca2a121752f20" title="Asserts that the content of array contents are equal (the test fails if not). ">TDOG_ASSERT_ARRAY_EQ()</a></li>
<li><a class="el" href="tdog_8hpp.html#a63c9783f134c160b1f683f9455b071eb" title="Asserts that the expression throws an exception of the specified type. ">TDOG_ASSERT_THROW()</a></li>
</ul>
<p>Additionally, the following negative (or "not equal") variants are available:</p><ul>
<li><a class="el" href="tdog_8hpp.html#ac7d4eb06170b622cb94adab77141041a" title="Asserts that the test condition is false (test fails if it is true). ">TDOG_ASSERT_NOT()</a></li>
<li><a class="el" href="tdog_8hpp.html#a9fb4c3b06b451209c023a2cff002970a" title="Asserts that the values are NOT equal (test fails if they are). ">TDOG_ASSERT_NEQ()</a></li>
<li><a class="el" href="tdog_8hpp.html#aed7a811f065c789d8aa43df5635a2893" title="Asserts that floating point (double) values are NOT equal. The test fails if the values are within th...">TDOG_ASSERT_DOUBLE_NEQ()</a></li>
<li><a class="el" href="tdog_8hpp.html#abf79dcf73c85322bbb82da129e65112d" title="Compares strings case insensitively and asserts that they are NOT equal (test fails if they are)...">TDOG_ASSERT_STRIC_NEQ()</a></li>
<li><a class="el" href="tdog_8hpp.html#a4c349e83a5d3792ffc8dab439c303d33" title="Asserts that the content of array contents are NOT equal (the test fails if they are). ">TDOG_ASSERT_ARRAY_NEQ()</a></li>
<li><a class="el" href="tdog_8hpp.html#a527ce0463067d149832fcd9474fa0332" title="Asserts that the expression does not throw an exception. ">TDOG_ASSERT_NO_THROW()</a></li>
</ul>
<p>Variants allowing a custom message are also supported.</p>
<h2><a class="anchor" id="tdog_fixtures"></a>
Test fixtures - setup/teardown</h2>
<p>Text fixtures implement setup and teardown routines which ready the environment for a test, or series of tests. Setup and teardown routines can be implemented on a test level, suite level and globally.</p>
<p>For a test level fixture, the <a class="el" href="tdog_8hpp.html#aaa1aebc02cc1bc6829f7f0292c59488d" title="Creates a test with custom data and setup/teardown functionality. ">TDOG_TEST_FIXTURE()</a> macro is provided, with which a test case is derived from a class or struct type provided which must implement the following methods:</p>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> setup();</div><div class="line"><span class="keywordtype">void</span> teardown();</div></div><!-- fragment --><p>Additionally, it must have a default constructor, and be instantiatable.</p>
<p>When the test is executed, the setup() method will be called first. It should return true on success, otherwise neither the test itself or the the teardown() routine will be called. If setup() returns false, or either setup() or teardown() throw an exception, the test will be set to the "error" state. You may also choose to put setup and teardown functionality in the constructor and destructor, but note that if the destructor throws an exception, behaviour is undefined.</p>
<p>Example</p>
<div class="fragment"><div class="line"><span class="comment">// Declare fixture type</span></div><div class="line"><span class="keyword">struct </span>person_t</div><div class="line">{</div><div class="line">  std::string name;</div><div class="line">  <span class="keywordtype">int</span> age;</div><div class="line"></div><div class="line">  <span class="keywordtype">bool</span> setup()</div><div class="line">  {</div><div class="line">    name = <span class="stringliteral">&quot;unknown&quot;</span>;</div><div class="line">    age = 25;</div><div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// &lt;- success</span></div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="keywordtype">void</span> teardown()</div><div class="line">  {</div><div class="line">    <span class="comment">// Any teardown code</span></div><div class="line">  }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">// Create test fixture</span></div><div class="line"><a class="code" href="tdog_8hpp.html#aaa1aebc02cc1bc6829f7f0292c59488d">TDOG_TEST_FIXTURE</a>(test_person, person_t)</div><div class="line">{</div><div class="line">  <a class="code" href="tdog_8hpp.html#adca2ad3329aa477d67d05b1421eda0f4">TDOG_ASSERT_EQ_MSG</a>(<span class="stringliteral">&quot;unknown&quot;</span>, name, <span class="stringliteral">&quot;Person name test&quot;</span>);</div><div class="line">  <a class="code" href="tdog_8hpp.html#adca2ad3329aa477d67d05b1421eda0f4">TDOG_ASSERT_EQ_MSG</a>(25, age, <span class="stringliteral">&quot;Default age&quot;</span>);</div><div class="line">}</div></div><!-- fragment --><p>Alternatively you may wish to implement setup and teardown functionality at the suite level. This is easy to do, and all that is needed is to create test cases prefixed with "setup" and "teardown" (ASCII case variations are accepted, as are leading underscores). TDOG will recognise these tests, and execute any "setup" named tests at the start of the suite, and "teardown" at the end, irrespective of where they are declared. These may call assert macros, like any normal test case and, should a setup test fail, the following tests in the suite will be skipped, including the teardown. If the suite contains nested suites (sub-suites) the teardown will be executed after those.</p>
<p>Example:</p>
<div class="fragment"><div class="line"><a class="code" href="tdog_8hpp.html#a87d164c8ed8e9fb72365df0fe74db013">TDOG_SUITE</a>(FixtureSuite)</div><div class="line">{</div><div class="line">  <a class="code" href="tdog_8hpp.html#afd6b256b805eab47d1031b32290cfd62">TDOG_TEST_CASE</a>(SetUpMySuite)</div><div class="line">  {</div><div class="line">    <span class="comment">// Perform setup</span></div><div class="line">    <a class="code" href="tdog_8hpp.html#a08c0d71137c2992f88b1e62ec1681f0e">TDOG_ASSERT</a>( setup_ok );</div><div class="line">  }</div><div class="line"></div><div class="line">  <a class="code" href="tdog_8hpp.html#afd6b256b805eab47d1031b32290cfd62">TDOG_TEST_CASE</a>(MyTest)</div><div class="line">  {</div><div class="line">    <span class="comment">// Perform testing</span></div><div class="line">  }</div><div class="line"></div><div class="line">  <a class="code" href="tdog_8hpp.html#afd6b256b805eab47d1031b32290cfd62">TDOG_TEST_CASE</a>(TeardownMySuite)</div><div class="line">  {</div><div class="line">    <span class="comment">// Perform teardown</span></div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="comment">// Close the suite</span></div><div class="line">  <a class="code" href="tdog_8hpp.html#a6e6f40f36240dcddfc013fc84db7de17">TDOG_CLOSE_SUITE</a></div><div class="line">}</div></div><!-- fragment --><p>As an alternative to <a class="el" href="tdog_8hpp.html#aaa1aebc02cc1bc6829f7f0292c59488d" title="Creates a test with custom data and setup/teardown functionality. ">TDOG_TEST_FIXTURE()</a>, you may prefer to wrap single unit tests in a suite, and provide them with "setup" and "teardown" named tests, as above.</p>
<p>You may also define "setup" and "teardown" tests in the global suite namespace simply by not enclosing them in a suite. For example:</p>
<div class="fragment"><div class="line"><a class="code" href="tdog_8hpp.html#afd6b256b805eab47d1031b32290cfd62">TDOG_TEST_CASE</a>(SETUP_GLOBAL)</div><div class="line">{</div><div class="line">  <span class="comment">// Perform setup</span></div><div class="line">  <a class="code" href="tdog_8hpp.html#a08c0d71137c2992f88b1e62ec1681f0e">TDOG_ASSERT</a>( setup_ok );</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// Implement tests</span></div><div class="line">...</div><div class="line"></div><div class="line">TDOG_TEST_CASE(TEARDOWN_GLOBAL)</div><div class="line">{</div><div class="line">  <span class="comment">// Perform teardown</span></div><div class="line">}</div></div><!-- fragment --><p>Here, irrespective of where it appears, the teardown routine will be executed at the end of the test run, after all other tests, suites and suite level teardowns.</p>
<h2><a class="anchor" id="tdog_repeated"></a>
Repeated tests</h2>
<p>Let's assume, for a moment, that we have written several pseudo random number generation classes, each derived from the same base class which has an "interface" which looks like this:</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>rand_obj</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  rand_obj(<span class="keywordtype">int</span> seed); <span class="comment">// &lt;- non default constructor</span></div><div class="line">  <span class="keyword">virtual</span> <span class="keywordtype">int</span> get_random() = 0; <span class="comment">// &lt;- pure virtual</span></div><div class="line">};</div></div><!-- fragment --><p>What we would not want to do is write the same test code, multiple times, in order to test each of our concrete random generator classes. Ideally, we would want to define a single test implementation, and "instantiate" the same test with all concrete types to test them the same way.</p>
<p>Here's how to do it:</p>
<div class="fragment"><div class="line"><span class="comment">// Define repeated test</span></div><div class="line"><a class="code" href="tdog_8hpp.html#a3b108efd1e373631e04a1943b0b84eca">TDOG_DEFINE_REPEATED</a>(rand_test)</div><div class="line">{</div><div class="line">  <span class="comment">// Create instance of random generator</span></div><div class="line">  USER_TYPE rand(237823); <span class="comment">// &lt;- fixed seed</span></div><div class="line"></div><div class="line">  <span class="comment">// Test result is different on the second call.</span></div><div class="line">  <span class="comment">// Not a realistic test of randomness, but just an example.</span></div><div class="line">  <span class="keywordtype">int</span> first = rand.get_random();</div><div class="line">  <a class="code" href="tdog_8hpp.html#a9fb4c3b06b451209c023a2cff002970a">TDOG_ASSERT_NEQ</a>(first, rand.get_random());</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// Instatiate actual tests with concrete generators</span></div><div class="line"><a class="code" href="tdog_8hpp.html#ad81bd537075349281e04586bde8afce5">TDOG_TEST_REPEATED</a>(mt32_test, rand_test, rand_mt32);</div><div class="line"><a class="code" href="tdog_8hpp.html#ad81bd537075349281e04586bde8afce5">TDOG_TEST_REPEATED</a>(lcg64_test, rand_test, rand_lcg64);</div><div class="line"><a class="code" href="tdog_8hpp.html#ad81bd537075349281e04586bde8afce5">TDOG_TEST_REPEATED</a>(lcg64_test, rand_test, rand_isaac32);</div></div><!-- fragment --><p>Unlike <a class="el" href="tdog_8hpp.html#ad97c64e905c04019bcf2b04107488a9d" title="Declares and implements a unit test which has access to the protected members of the type provided...">TDOG_TEST_PROTECTED()</a> or <a class="el" href="tdog_8hpp.html#aaa1aebc02cc1bc6829f7f0292c59488d" title="Creates a test with custom data and setup/teardown functionality. ">TDOG_TEST_FIXTURE()</a>, the test is not derived from the supplied "user_type", but is implementated internally as template class. In the above, we define the implementation using <a class="el" href="tdog_8hpp.html#a3b108efd1e373631e04a1943b0b84eca" title="Defines a test that can be repeated using a supplied data type. ">TDOG_DEFINE_REPEATED()</a>, and give it a repeated "test typename". The typedef "USER_TYPE" will defined for use in the test implementation, as shown above. The test is not instantiated, however, until we declare <a class="el" href="tdog_8hpp.html#ad81bd537075349281e04586bde8afce5" title="Instantiates a repeated test implementation with the supplied user data type. ">TDOG_TEST_REPEATED()</a>, which we must supply with a unique test name (i.e. "mt32_test"), the repeated test type ("rand_test"), and the concrete "user_type" with which to test.</p>
<p>Moreover, a repeated test can be used to fulfil a different test requirement.</p>
<p>Here, we will assume that we have written a function overloaded for both std::string std::wstring types, which looks like this:</p>
<div class="fragment"><div class="line"><span class="comment">// Return true if strings are same case insensitively</span></div><div class="line"><span class="keywordtype">bool</span> insensitive_compare(<span class="keyword">const</span> std::string&amp; s1, <span class="keyword">const</span> std::string&amp; s1);</div><div class="line"><span class="keywordtype">bool</span> insensitive_compare(<span class="keyword">const</span> std::wstring&amp; s1, <span class="keyword">const</span> std::wstring&amp; s1);</div><div class="line">\code</div><div class="line"></div><div class="line">We could test both of these as follows:</div><div class="line"></div><div class="line">\code</div><div class="line"><a class="code" href="tdog_8hpp.html#a3b108efd1e373631e04a1943b0b84eca">TDOG_DEFINE_REPEATED</a>(compare_test)</div><div class="line">{</div><div class="line">  <span class="comment">// Initialise</span></div><div class="line">  USER_TYPE upper = USER_TYPE(3, <span class="charliteral">&#39;A&#39;</span>); <span class="comment">// &lt;- see basic_string constructor</span></div><div class="line">  USER_TYPE lower = USER_TYPE(3, <span class="charliteral">&#39;a&#39;</span>);</div><div class="line"></div><div class="line">  <span class="comment">// Positive test</span></div><div class="line">  <a class="code" href="tdog_8hpp.html#a08c0d71137c2992f88b1e62ec1681f0e">TDOG_ASSERT</a>( insensitive_compare(upper, lower) );</div><div class="line"></div><div class="line">  <span class="comment">// Negative test</span></div><div class="line">  USER_TYPE different = USER_TYPE(3, <span class="charliteral">&#39;b&#39;</span>);</div><div class="line">  <a class="code" href="tdog_8hpp.html#ac7d4eb06170b622cb94adab77141041a">TDOG_ASSERT_NOT</a>( insensitive_compare(upper, different) );</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// Now instantiate with both string types</span></div><div class="line"><a class="code" href="tdog_8hpp.html#ad81bd537075349281e04586bde8afce5">TDOG_TEST_REPEATED</a>(narrow_test, compare_test, std::string);</div><div class="line"><a class="code" href="tdog_8hpp.html#ad81bd537075349281e04586bde8afce5">TDOG_TEST_REPEATED</a>(wide_test, compare_test, std::wstring);</div></div><!-- fragment --><p>When executed, the test names shown in the reports will be "narrow_test" and "wide_type" respectively, but file and line number information will refer to where the implementation is defined. Use the fully qualified "test names" when running or disabling test, rather than the repeated test typename.</p>
<h2><a class="anchor" id="tdog_print"></a>
Outputting information</h2>
<p>Test implementations can write custom information to the test reports using the <a class="el" href="tdog_8hpp.html#a6bd94e2a473ce988298daba4073a0547" title="Writes an information message string to the test report. ">TDOG_PRINT()</a> and <a class="el" href="tdog_8hpp.html#a8844bd91a098329b4b7e468b6dd67646" title="Writes a formatted value information string to the test report. ">TDOG_PRINTF()</a> macros.</p>
<p>For example:</p>
<div class="fragment"><div class="line"><a class="code" href="tdog_8hpp.html#afd6b256b805eab47d1031b32290cfd62">TDOG_TEST_CASE</a>(is_prime_func)</div><div class="line">{</div><div class="line">  <a class="code" href="tdog_8hpp.html#aeaf1cfd55c4e4237b8f53c769d1c3b5a">TDOG_SET_GLOBAL_LIMIT_EXEMPT</a>();</div><div class="line">  <a class="code" href="tdog_8hpp.html#a6bd94e2a473ce988298daba4073a0547">TDOG_PRINT</a>(<span class="stringliteral">&quot;Go for coffee - this is going to take a long time.&quot;</span>);</div><div class="line"></div><div class="line">  <a class="code" href="tdog_8hpp.html#a08c0d71137c2992f88b1e62ec1681f0e">TDOG_ASSERT</a>( is_prime(HUGE_PRIME_NUM) );</div><div class="line">}</div></div><!-- fragment --><p>IMPORTANT. Information output via <a class="el" href="tdog_8hpp.html#a6bd94e2a473ce988298daba4073a0547" title="Writes an information message string to the test report. ">TDOG_PRINT()</a> and <a class="el" href="tdog_8hpp.html#a8844bd91a098329b4b7e468b6dd67646" title="Writes a formatted value information string to the test report. ">TDOG_PRINTF()</a> appear only in "verbose" style reports (i.e. RS_TEXT_VERBOSE). They are ignored for summary reports.</p>
<p>To write out a formatted value to the report, use <a class="el" href="tdog_8hpp.html#a8844bd91a098329b4b7e468b6dd67646" title="Writes a formatted value information string to the test report. ">TDOG_PRINTF()</a> instead. This is macro is similar to <a class="el" href="tdog_8hpp.html#a6bd94e2a473ce988298daba4073a0547" title="Writes an information message string to the test report. ">TDOG_PRINT()</a>, except that it is possible to supply an additional value which will appear in a formatted message. The format is similar to that used in the C printf() function, although more restrictive.</p>
<p>Example:</p>
<div class="fragment"><div class="line"><a class="code" href="tdog_8hpp.html#a8844bd91a098329b4b7e468b6dd67646">TDOG_PRINTF</a>(<span class="stringliteral">&quot;final result is 0x%08X&quot;</span>, rslt);</div></div><!-- fragment --><p>The value parameter may be an any integer type upto 64-bit, or one of the following types:</p><ul>
<li>const char*</li>
<li>const wchar_t*</li>
<li>std::string</li>
<li>std::wstring</li>
<li>double</li>
</ul>
<p>To identify the location and format of the value in the output, the message string should contain one of the format specifiers below.</p>
<p>Integer Values:</p><ul>
<li>%d or %i - Signed integer</li>
<li>%u - Unsigned integer</li>
<li>%c - Character</li>
<li>%o - Signed octal integer</li>
<li>%x - Unsigned hex integer (lower case)</li>
<li>%02x - 2 digit hex (lower case)</li>
<li>%04x - 4 digit hex (lower case)</li>
<li>%08x - 8 digit hex (lower case)</li>
<li>%X - Unsigned hex (upper case)</li>
<li>%02X - 2 digit hex (upper case)</li>
<li>%04X - 4 digit hex (upper case)</li>
<li>%08X - 8 digit hex (upper case)</li>
<li>%b - Boolean ("true", or "false")</li>
</ul>
<p>Floating point:</p><ul>
<li>%f - Double</li>
</ul>
<p>String:</p><ul>
<li>%s - String value</li>
<li>%k - Escaped string value</li>
</ul>
<p>Generic:</p><ul>
<li>%g - Defaults to %d, %f, or %s depending on value type</li>
</ul>
<p>It is recommended that you use "\%g" generally, unless a specific format is required, as it will act as the placeholder for all supported value types.</p>
<p>Unlike the C printf() function, the <a class="el" href="tdog_8hpp.html#a8844bd91a098329b4b7e468b6dd67646" title="Writes a formatted value information string to the test report. ">TDOG_PRINTF()</a> macro does not support a variable number of arguments, and the available specifiers are restricted to the exact forms above.</p>
<p>Additionally, the "%b" and "%k" specifiers have no equivalent in the C printf() function. The "%b" is used to represent a boolean value, and is substituted with either "true" or "false". The "\%k" applies to strings, but unlike "\%s", ASCII characters less than 0x20 (space) in value will be substitued with "escaped" characters including the replacements: "\t", "\n", "\v", "\f" and "\r".</p>
<p>For example, the tab character (0x09) will be replaced with "\t". For other characters, hex digits will be used instead, such as "\x08" for backspace.</p>
<p>Where the input message contains multiple specifiers, all will be substituted with the same value.</p>
<h2><a class="anchor" id="tdog_setup"></a>
Setup and teardown</h2>
<p>Test setup and teardown code can be implemented at either the test case level, or test suite level.</p>
<p>To implement individual test case setup and teardown, use a "test fixture", as described above. Setup code can be defined in the constructor of the associated data type, and teardown code in its destructor.</p>
<p>At the suite level, any test case name beginning with "setup" (or "_setup"), will always be executed at the start of the suite. Whereas, a test name beginning with "teardown" (or "_teardown") will be executed at the end. It is, therefore, possible to declare and manage suite-wide data this way.</p>
<p>For example:</p>
<div class="fragment"><div class="line"><a class="code" href="tdog_8hpp.html#a87d164c8ed8e9fb72365df0fe74db013">TDOG_SUITE</a>(suite_name)</div><div class="line">{</div><div class="line">  <span class="keywordtype">char</span>* test_array = 0;</div><div class="line"></div><div class="line">  <a class="code" href="tdog_8hpp.html#afd6b256b805eab47d1031b32290cfd62">TDOG_TEST_CASE</a>(setup)</div><div class="line">  {</div><div class="line">    <span class="comment">// Create populate data</span></div><div class="line">    test_array = <span class="keyword">new</span> <span class="keywordtype">char</span>[5];</div><div class="line">  }</div><div class="line"></div><div class="line">  <a class="code" href="tdog_8hpp.html#afd6b256b805eab47d1031b32290cfd62">TDOG_TEST_CASE</a>(some_test1)</div><div class="line">  {</div><div class="line">    <span class="comment">// Perform testing</span></div><div class="line">    ...</div><div class="line">  }</div><div class="line"></div><div class="line">  <a class="code" href="tdog_8hpp.html#afd6b256b805eab47d1031b32290cfd62">TDOG_TEST_CASE</a>(teardown)</div><div class="line">  {</div><div class="line">    <span class="comment">// Destroy data</span></div><div class="line">    <span class="keyword">delete</span>[] test_array;</div><div class="line">  }</div><div class="line"></div><div class="line"> <span class="comment">// Must close test suite</span></div><div class="line"> <a class="code" href="tdog_8hpp.html#a6e6f40f36240dcddfc013fc84db7de17">TDOG_CLOSE_SUITE</a></div><div class="line">}</div></div><!-- fragment --><p>Note. Case variations of the "setup" and "teardown" names are also permitted, and the variations "SETUP_MYSUITE" or "SetupMyTest" can be used with the same effect.</p>
<h2><a class="anchor" id="tdog_run"></a>
Running tests and execution order</h2>
<p>To execute all tests, use the following macro:</p>
<div class="fragment"><div class="line"><span class="comment">// Run all tests</span></div><div class="line"><a class="code" href="tdog_8hpp.html#ad86b4ee69bd50879b1ad0f3096019f77">TDOG_RUN</a>(<span class="stringliteral">&quot;*&quot;</span>);</div></div><!-- fragment --><p>To run a single test case in the default suite, for example, call:</p>
<div class="fragment"><div class="line"><span class="comment">// Run a single test</span></div><div class="line"><a class="code" href="tdog_8hpp.html#ad86b4ee69bd50879b1ad0f3096019f77">TDOG_RUN</a>(<span class="stringliteral">&quot;TESTNAME1&quot;</span>);</div></div><!-- fragment --><p>The input string may contain multiple names separated with a space or comma (or both). Test case names should be qualified with the suite name, and are case sensitive. If a test case is not part of a suite (i.e. it's in the default suite), then the name may optionally be prefixed with the default namespace "::". Any name referring to a test or suite which does not exist will be ignored.</p>
<p>Both test case and suite names may be specified, and will match according to the following rules:</p>
<ul>
<li>To match a single test, provide the fully qualified test name exactly (i.e. "SUITE1::SUITE2::TESTNAME").</li>
<li>To match all tests directly in suite, but not those in any of its sub-suites, use the suite name suffixed with "::". For example, "SUITE1::".</li>
<li>To match all tests in a suite, including its sub-suites, suffix the name input with "::*". For example, "SUITE1::*".</li>
<li>To match everything, use "*" (or "::*").</li>
</ul>
<p>To specify all tests in the default test suite (i.e. those declared outside of a suite) use "::". For example, the following will run the default suite, plus a single test in another suite:</p>
<div class="fragment"><div class="line"><span class="comment">// Run specified tests</span></div><div class="line"><a class="code" href="tdog_8hpp.html#ad86b4ee69bd50879b1ad0f3096019f77">TDOG_RUN</a>(<span class="stringliteral">&quot;::, SUITE1::TESTNAME2&quot;</span>);</div></div><!-- fragment --><p>Test cases which have been disabled will be not be executed, even if they are explicity specified in the "names" string.</p>
<p>When running tests, suite names will always be sorted, with the default suite executed first. Names are sorted according to an ordinal* comparison between their ASCII lower case values, and if equal, their case sensitive values. This will execute names with case variations together in a consistent way.</p>
<p>By default, test names within suites will be executed in the order they are registered with the runner, with a few exceptions:</p>
<ul>
<li>Test names beginning with "setup" or "_setup" (case insensitive) will always be executed at the beginning of the suite.</li>
<li>Test names beginning with "teardown" or "_teardown" (case insensitive) will always be executed at the end of the suite &ndash; after any nested suites.</li>
</ul>
<p>If <a class="el" href="tdog_8hpp.html#ab83fe6ccbe0d61aec1194fdf393cd775" title="Sets whether the run order is fully sorted. ">TDOG_SET_RUN_SORTED()</a> is called to fully sort the run order, test cases inside suites will also be sorted during execution. It is good practice to ensure that tests do not depend on the run order, other than for explicitly declared setup() and teardown() operations.</p>
<p>The return value of <a class="el" href="tdog_8hpp.html#ad86b4ee69bd50879b1ad0f3096019f77" title="Run the tests matching the given list of test case and suite name(s). ">TDOG_RUN()</a> gives the number of test cases which either failed or raised an error. The result will be 0 if all test cases ran successfully without asserting failures or test errors. If, however, no tests were run, the return value will be <a class="el" href="namespacetdog.html#a76550af807ff51ad1b6d7a6bc7b85a08" title="Return constant indicating that no test were run. ">tdog::RAN_NONE</a> (-1), rather than 0. This distinguishes a successful test run from one that didn't actually test anything. This may occur, for example, if all test cases are disabled, if no tests have been registered with the runner, or the name input refers to non-existent tests.</p>
<h2><a class="anchor" id="tdog_info"></a>
Project information</h2>
<p>A project name and version string can be associated with the tests using:</p>
<div class="fragment"><div class="line"><a class="code" href="tdog_8hpp.html#a76658d22bb8c09b124bf7c4ec271c34d">TDOG_SET_PROJECT_NAME</a>(<span class="stringliteral">&quot;smppd&quot;</span>);</div><div class="line"><a class="code" href="tdog_8hpp.html#a82662b3c78eb8c901c852e3ab2c707f7">TDOG_SET_PROJECT_VERSION</a>(<span class="stringliteral">&quot;5.2.3&quot;</span>);</div><div class="line"><a class="code" href="tdog_8hpp.html#a38d859a1f3469ac114319d32611c34e3">TDOG_SET_PROJECT_DESC</a>(<span class="stringliteral">&quot;Additional reports will be written to the output directory.&quot;</span>);</div><div class="line">...</div><div class="line">TDOG_RUN(<span class="stringliteral">&quot;*&quot;</span>);</div></div><!-- fragment --><p>This information will be displayed in test reports provided it is set before running the tests.</p>
<p>Additionally, an author name can be associated with each test case. In this case, this must be set within the test implementation itself, as follows:</p>
<div class="fragment"><div class="line"><a class="code" href="tdog_8hpp.html#afd6b256b805eab47d1031b32290cfd62">TDOG_TEST_CASE</a>(some_test)</div><div class="line">{</div><div class="line">  <a class="code" href="tdog_8hpp.html#a6153930658d7f1d23765f02203aea2a1">TDOG_SET_AUTHOR</a>(<span class="stringliteral">&quot;Employee 24601&quot;</span>);</div><div class="line">  ...</div><div class="line">}</div></div><!-- fragment --><h2><a class="anchor" id="tdog_disable"></a>
Disabling tests</h2>
<p>There are several ways to disable tests so that they are not performed during the test execution.</p>
<p>Tests can be disabled prior to execution, as follows:</p>
<div class="fragment"><div class="line"><a class="code" href="tdog_8hpp.html#a237c02f0f5655f570a5070a5185a14a3">TDOG_SET_ENABLED</a>(<span class="stringliteral">&quot;TEST1, SUITE::TEST2&quot;</span>, <span class="keyword">false</span>);</div><div class="line">...</div><div class="line">TDOG_RUN(<span class="stringliteral">&quot;*&quot;</span>);</div></div><!-- fragment --><p>Here, the input string may contain multiple names separated with a space or comma (or both as above). Entire suites can easily be disabled using the naming convention described in: <a class="el" href="index.html#tdog_run">Running tests and execution order</a></p>
<p>Additionally, a test case can be skipped from within its own implementation with a call to <a class="el" href="tdog_8hpp.html#a75b24bd4ec106347bb86e11e00b94827" title="Allows a test to be skipped with a statement from within the test implementation code. ">TDOG_SKIP_TEST()</a>, as follows:</p>
<div class="fragment"><div class="line"><a class="code" href="tdog_8hpp.html#afd6b256b805eab47d1031b32290cfd62">TDOG_TEST_CASE</a>(some_test)</div><div class="line">{</div><div class="line">  <a class="code" href="tdog_8hpp.html#a6153930658d7f1d23765f02203aea2a1">TDOG_SET_AUTHOR</a>(<span class="stringliteral">&quot;Employee 24601&quot;</span>);</div><div class="line"></div><div class="line">  <span class="comment">// Disable this test for the time being</span></div><div class="line">  <a class="code" href="tdog_8hpp.html#a75b24bd4ec106347bb86e11e00b94827">TDOG_SKIP_TEST</a>();</div><div class="line"></div><div class="line">  <span class="comment">// Unexecuted statements</span></div><div class="line">  ...</div><div class="line">}</div></div><!-- fragment --><p>This can be used by the test author to skip the test. Skipping a test effectively disables it, however, skipped and disabled states are considered disctinct. If used, the skip macro should be placed at or near the start of the test code, as execution will occur up to the point it is called.</p>
<h2><a class="anchor" id="tdog_cmdline"></a>
Support for CLI</h2>
<p>The <a class="el" href="tdog_8hpp.html#ad885dc31d4c92ac62fbcfebcbf47eb48" title="Run the tests according to the given command line arguments. ">TDOG_RUN_CMD()</a> macro is provided to parse command line arguments and make running and disablising tests from the command line simple. This macro takes the command line arguments directly from the main() function, and runs the tests according to:</p>
<div class="fragment"><div class="line">--trun &lt;run test list&gt; [--tdis &lt;disable test list&gt;]</div></div><!-- fragment --><p>Other parameters will be ignored.</p>
<p>To run all tests, the command "--trun *" should be given or, alternatively, "--trall". The use of "--tdis" to disable tests is optional.</p>
<p>Example code:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div><div class="line">{</div><div class="line">  <span class="comment">// Run the tests</span></div><div class="line">  <span class="keywordflow">return</span> <a class="code" href="tdog_8hpp.html#ad885dc31d4c92ac62fbcfebcbf47eb48">TDOG_RUN_CMD</a>(argc, argv, <span class="keyword">true</span>);</div><div class="line">}</div></div><!-- fragment --><p>The following will run all with two tests disabled:</p>
<div class="fragment"><div class="line">--trun * --tdis test1,suite2::test2</div></div><!-- fragment --><p>Windows style input, with a command prefix of "/", is also accepted and the following command is equivalent to that above:</p>
<div class="fragment"><div class="line">/trun:* /tdis:test1,suite2::test2</div></div><!-- fragment --><p>Moreover, this macro is overloaded with the wchar_t type for use with a Windows main function.</p>
<p>As a demonstration, run the self-test application with the following:</p>
<div class="fragment"><div class="line">./selftest64 --trun message_suite::*</div></div><!-- fragment --><p>This will run only the tests in the "message_suite". (Note the name of the application binary is platform dependent). See <a class="el" href="index.html#tdog_run">Running tests and execution order</a> and <a class="el" href="tdog_8hpp.html#ad885dc31d4c92ac62fbcfebcbf47eb48" title="Run the tests according to the given command line arguments. ">TDOG_RUN_CMD()</a> for more information.</p>
<h2><a class="anchor" id="tdog_host"></a>
Hostname</h2>
<p>Test reports will display the hostname of the machine used to run the test. TDOG will look for the hostname under the environment variable "TDOG_HOSTNAME". If this doesn't exist, it will use "HOSTNAME" instead. If this is unspecified, the hostname will default to "localhost".</p>
<p>Website: <a href="https://kuiper.zone/">https://kuiper.zone/</a> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
